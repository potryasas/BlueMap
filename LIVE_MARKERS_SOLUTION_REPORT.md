# üéØ –†–ï–®–ï–ù–ò–ï –ü–†–û–ë–õ–ï–ú–´ –° –û–¢–û–ë–†–ê–ñ–ï–ù–ò–ï–ú –ú–ê–†–ö–ï–†–û–í

## üìã –ê–ù–ê–õ–ò–ó –ü–†–û–ë–õ–ï–ú–´

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ:
- ‚úÖ **–ú–∞—Ä–∫–µ—Ä—ã –¥–æ–±–∞–≤–ª—è–ª–∏—Å—å –∫–æ–º–∞–Ω–¥–∞–º–∏** - —Å–∏—Å—Ç–µ–º–∞ –∫–æ–º–∞–Ω–¥ —Ä–∞–±–æ—Ç–∞–ª–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚ùå **–ú–∞—Ä–∫–µ—Ä—ã –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å –Ω–∞ –∫–∞—Ä—Ç–µ** - –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–∞ —Å–≤—è–∑—å –º–µ–∂–¥—É –∫–æ–º–∞–Ω–¥–∞–º–∏ –∏ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º
- ‚úÖ **–ò–≥—Ä–æ–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å –Ω–æ—Ä–º–∞–ª—å–Ω–æ** - —Å–∏—Å—Ç–µ–º–∞ live players —Ä–∞–±–æ—Ç–∞–ª–∞

### –ö–æ—Ä–µ–Ω—å –ø—Ä–æ–±–ª–µ–º—ã:
BlueMap –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–¥–≤–æ–π–Ω—É—é —Å–∏—Å—Ç–µ–º—É –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è**:
1. **–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ** - —Ñ–∞–π–ª—ã `markers.json` (–¥–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è)
2. **Live –¥–∞–Ω–Ω—ã–µ** - —Ñ–∞–π–ª—ã `live/markers.json` –∏ `live/players.json` (–¥–ª—è –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞)

**–ü—Ä–æ–±–ª–µ–º–∞:** –û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–∞ —Å–∏—Å—Ç–µ–º–∞ live –º–∞—Ä–∫–µ—Ä–æ–≤, –∞–Ω–∞–ª–æ–≥–∏—á–Ω–∞—è live players!

## üîß –†–ï–®–ï–ù–ò–ï

### –ú–µ—Ö–∞–Ω–∏–∫–∞ —Ä–∞–±–æ—Ç—ã –∏–≥—Ä–æ–∫–æ–≤ (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –∫–∞–∫ –æ–±—Ä–∞–∑–µ—Ü):
```
–ò–≥—Ä–æ–∫–∏ (–†–ê–ë–û–¢–ê–ï–¢):
Server ‚Üí LivePlayersDataSupplier ‚Üí /live/players.json ‚Üí WebApp ‚Üí –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
```

### –°–æ–∑–¥–∞–Ω–Ω–∞—è –º–µ—Ö–∞–Ω–∏–∫–∞ –¥–ª—è –º–∞—Ä–∫–µ—Ä–æ–≤:
```
–ú–∞—Ä–∫–µ—Ä—ã (–ò–°–ü–†–ê–í–õ–ï–ù–û):
Commands ‚Üí markers.json ‚Üí Live Updater ‚Üí /live/markers.json ‚Üí WebApp ‚Üí –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
```

## üìÅ –°–û–ó–î–ê–ù–ù–´–ï –§–ê–ô–õ–´ –ò –ú–û–î–ò–§–ò–ö–ê–¶–ò–ò

### 1. `live-markers-fix.py` ‚ú®
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã live –º–∞—Ä–∫–µ—Ä–æ–≤
- –°–æ–∑–¥–∞–µ—Ç –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `live/` 
- –ö–æ–ø–∏—Ä—É–µ—Ç `markers.json` ‚Üí `live/markers.json`
- –°–æ–∑–¥–∞–µ—Ç fallback `live/players.json`
- –û–±–Ω–æ–≤–ª—è–µ—Ç `settings.json` –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ live –¥–∞–Ω–Ω—ã—Ö

### 2. `test-live-server.py` üß™
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –¢–µ—Å—Ç–æ–≤—ã–π HTTP —Å–µ—Ä–≤–µ—Ä
- –≠–º—É–ª–∏—Ä—É–µ—Ç BlueMap –≤–µ–±-—Å–µ—Ä–≤–µ—Ä
- –û–±—Å–ª—É–∂–∏–≤–∞–µ—Ç `/live/markers.json` –∏ `/live/players.json`
- –õ–æ–≥–∏—Ä—É–µ—Ç –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

### 3. `integrate-live-markers-legacy.py` ‚öôÔ∏è
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ legacy BlueMap –∫–æ–¥
- –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç `LegacyBukkitPlugin.java`
- –î–æ–±–∞–≤–ª—è–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ live –º–∞—Ä–∫–µ—Ä–æ–≤ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
- –°–æ–∑–¥–∞–µ—Ç HTTP-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è `/live/markers.json`

## üöÄ –ò–ù–°–¢–†–£–ö–¶–ò–ò –ü–û –ü–†–ò–ú–ï–ù–ï–ù–ò–Æ

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ë—ã—Å—Ç—Ä–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)
```bash
# 1. –°–æ–∑–¥–∞–µ–º live —Å–∏—Å—Ç–µ–º—É
python live-markers-fix.py

# 2. –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä
python test-live-server.py

# 3. –û—Ç–∫—Ä—ã–≤–∞–µ–º –≤ –±—Ä–∞—É–∑–µ—Ä–µ
http://localhost:8100

# 4. –ü—Ä–æ–≤–µ—Ä—è–µ–º live –¥–∞–Ω–Ω—ã–µ
http://localhost:8100/live/markers.json
http://localhost:8100/live/players.json
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ BlueMap
```bash
# 1. –í—ã–ø–æ–ª–Ω—è–µ–º –í–∞—Ä–∏–∞–Ω—Ç 1

# 2. –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ–º –≤ –∫–æ–¥
python integrate-live-markers-legacy.py

# 3. –ü–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ–º –ø–ª–∞–≥–∏–Ω
./gradlew bukkit-legacy:build

# 4. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–æ–≤—ã–π JAR
cp implementations/bukkit-legacy/build/libs/bluemap-bukkit-legacy-5.7-SNAPSHOT.jar /–ø—É—Ç—å/–∫/—Å–µ—Ä–≤–µ—Ä—É/plugins/

# 5. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º —Å–µ—Ä–≤–µ—Ä
```

## üìÇ –°–¢–†–£–ö–¢–£–†–ê –§–ê–ô–õ–û–í (–î–û –ò –ü–û–°–õ–ï)

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```
web/maps/world/
‚îú‚îÄ‚îÄ markers.json          # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä–∫–µ—Ä—ã (–ù–ï —á–∏—Ç–∞–ª–∏—Å—å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º)
‚îú‚îÄ‚îÄ live-players.json     # –ü—É—Å—Ç–æ–π —Ñ–∞–π–ª
‚îî‚îÄ‚îÄ settings.json         # –ë–∞–∑–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
```

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```
web/maps/world/
‚îú‚îÄ‚îÄ markers.json          # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä–∫–µ—Ä—ã (—Å–æ–∑–¥–∞—é—Ç—Å—è –∫–æ–º–∞–Ω–¥–∞–º–∏)
‚îú‚îÄ‚îÄ live/
‚îÇ   ‚îú‚îÄ‚îÄ markers.json      # Live –º–∞—Ä–∫–µ—Ä—ã (—á–∏—Ç–∞—é—Ç—Å—è –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º)
‚îÇ   ‚îî‚îÄ‚îÄ players.json      # Live –∏–≥—Ä–æ–∫–∏
‚îú‚îÄ‚îÄ live-players.json     # –û—Å—Ç–∞–≤–ª–µ–Ω –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
‚îî‚îÄ‚îÄ settings.json         # –û–±–Ω–æ–≤–ª–µ–Ω —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π live –¥–∞–Ω–Ω—ã—Ö
```

## üîç –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å BlueMap:
1. **PlayerMarkerManager** - –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç `/live/players.json` –∫–∞–∂–¥—ã–µ 1000ms
2. **NormalMarkerManager** - –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç `/live/markers.json` –∫–∞–∂–¥—ã–µ 10000ms
3. **MapRequestHandler** - –º–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –∫ live –¥–∞–Ω–Ω—ã–º

### JavaScript –∫–æ–¥ (–∏–∑ BlueMapApp.js):
```javascript
// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –º–∞—Ä–∫–µ—Ä–æ–≤
this.markerFileManager = new NormalMarkerManager(
    this.mapViewer.markers, 
    map.data.liveDataRoot + "/live/markers.json", 
    this.events
);
```

### –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö:
```
–ö–æ–º–∞–Ω–¥—ã (/bluemap markers add) 
    ‚Üì
–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π markers.json 
    ‚Üì
Live Updater (–∫–∞–∂–¥—ã–µ 30 —Å–µ–∫)
    ‚Üì
live/markers.json 
    ‚Üì
HTTP –∑–∞–ø—Ä–æ—Å (–∫–∞–∂–¥—ã–µ 10 —Å–µ–∫)
    ‚Üì
–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –º–∞—Ä–∫–µ—Ä—ã
```

## ‚úÖ –†–ï–ó–£–õ–¨–¢–ê–¢

### –ß—Ç–æ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç:
- ‚úÖ **–ú–∞—Ä–∫–µ—Ä—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –∫–æ–º–∞–Ω–¥–∞–º–∏**
- ‚úÖ **–ú–∞—Ä–∫–µ—Ä—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞ –∫–∞—Ä—Ç–µ** üéâ
- ‚úÖ **–ú–∞—Ä–∫–µ—Ä—ã –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤ –º–µ–Ω—é** üéâ
- ‚úÖ **–ò–≥—Ä–æ–∫–∏ –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å**
- ‚úÖ **–°–∏—Å—Ç–µ–º–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏**

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã:
1. **–î–æ–±–∞–≤—å—Ç–µ –º–∞—Ä–∫–µ—Ä –∫–æ–º–∞–Ω–¥–æ–π:**
   ```
   /bluemap markers add category_1 test_marker 100 70 200 "–¢–µ—Å—Ç–æ–≤—ã–π –º–∞—Ä–∫–µ—Ä"
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ –∫–∞—Ä—Ç—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ
   - –ú–∞—Ä–∫–µ—Ä –¥–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è —á–µ—Ä–µ–∑ 10-30 —Å–µ–∫—É–Ω–¥
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –º–µ–Ω—é –º–∞—Ä–∫–µ—Ä–æ–≤ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ

3. **–û—Ç–ª–∞–¥–∫–∞ —á–µ—Ä–µ–∑ URL:**
   ```
   http://localhost:8100/live/markers.json
   ```

## üêõ –û–¢–õ–ê–î–ö–ê

### –ï—Å–ª–∏ –º–∞—Ä–∫–µ—Ä—ã –Ω–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª—ã:**
   ```bash
   ls -la bluemap-test/web/maps/world/live/
   # –î–æ–ª–∂–Ω—ã –±—ã—Ç—å: markers.json, players.json
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ:**
   ```bash
   cat bluemap-test/web/maps/world/live/markers.json
   # –î–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –≤–∞—à–∏ –º–∞—Ä–∫–µ—Ä—ã
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞:**
   - F12 ‚Üí Console
   - –ò—â–∏—Ç–µ –æ—à–∏–±–∫–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ `/live/markers.json`

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞:**
   ```
   [BlueMap] Started live markers updater (30 second interval)
   [BlueMap] Updated live markers from static file
   ```

## üéâ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

**–ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞!** 

–ú–∞—Ä–∫–µ—Ä—ã —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ—á–Ω–æ –∫–∞–∫ –∏–≥—Ä–æ–∫–∏:
- ‚ú® **–î–æ–±–∞–≤–ª—è—é—Ç—Å—è –∫–æ–º–∞–Ω–¥–∞–º–∏**
- ‚ú® **–û—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞ –∫–∞—Ä—Ç–µ**  
- ‚ú® **–û–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏**
- ‚ú® **–í–∏–¥–Ω—ã –≤ –º–µ–Ω—é**

–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ—Ç –∂–µ –ø—Ä–∏–Ω—Ü–∏–ø, —á—Ç–æ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–æ–≤, –Ω–æ –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä–∫–µ—Ä–æ–≤. –ú–∞—Ä–∫–µ—Ä—ã –æ—Å—Ç–∞—é—Ç—Å—è –Ω–µ–ø–æ–¥–≤–∏–∂–Ω—ã–º–∏ (–∫–∞–∫ –∏ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å), –Ω–æ —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ. 