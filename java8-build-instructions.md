# BlueMap Java 8 Build Instructions

## Проблемы и их решения

### 1. Карта не рендерится

**Проблема**: MapRenderer только симулирует рендеринг, а не создает настоящие карты.

**Решение**: Обновлен MapRenderer для создания базовой структуры карт:
- Создает директории `hires` и `lowres` для каждого мира
- Генерирует `settings.json` с базовыми настройками карты
- Создает примеры тайлов в формате JSON

**Файлы изменены**:
- `implementations/bukkit-legacy/src/main/java/de/bluecolored/bluemap/bukkit/legacy/java8compat/MapRenderer.java`

### 2. Веб-интерфейс открывается на странице выбора карт

**Проблема**: По умолчанию веб-интерфейс показывает меню выбора карт вместо прямого открытия верхнего мира.

**Решение**: Настроен `start-location` в конфигурации webapp для автоматического открытия мира "world":

**Файлы изменены**:
- `common/src/main/resources/de/bluecolored/bluemap/config/webapp.conf`

```hocon
start-location: "world:0:16:-32:390:0.1:0.19:0:0:perspective"
```

Это настройка заставляет браузер сразу открывать карту мира "world" с перспективным видом в координатах 0, 16, -32.

## Сборка проекта

```bash
./gradlew build
```

## Запуск

1. Скопируйте собранный JAR из `implementations/bukkit-legacy/build/libs/` в папку `plugins` вашего сервера Bukkit 1.5.2
2. Запустите сервер
3. BlueMap автоматически создаст конфигурационные файлы в `plugins/BlueMap/`
4. Веб-интерфейс будет доступен по адресу `http://localhost:8100`
5. При открытии веб-интерфейса браузер автоматически перенаправится на карту мира

## Дополнительная настройка

### Изменение начального мира

Если у вас основной мир называется не "world", измените `start-location` в файле конфигурации:

`plugins/BlueMap/webapp.conf`:
```hocon
start-location: "your_world_name:0:64:0:500:0:0:0:0:perspective"
```

### Создание настоящего рендеринга

Текущая версия создает только базовую структуру карт. Для полноценного рендеринга нужна интеграция с BlueMap core, что потребует:

1. Замены `BlueMapStub` на настоящий `BlueMapPlugin` из common
2. Реализации полного интерфейса `ServerInterface`
3. Интеграции с системой рендеринга BlueMap

Это более сложная задача, требующая глубокого понимания архитектуры BlueMap.

## Текущее состояние

- ✅ Проект собирается и запускается
- ✅ Веб-сервер работает на порту 8100
- ✅ Веб-интерфейс перенаправляет на основной мир
- ✅ Создается базовая структура карт
- ⚠️ Реальный рендеринг миров пока не реализован (только заглушки)

Для полноценной работы рекомендуется интеграция с настоящим ядром BlueMap. 